#!/bin/sh
I2C_PCA9546_ADDR=0x70
I2C_ADC7842_ADDR=0x20
I2C_ADC7842_ADDR_SDP=0x48
I2C_ADC7842_ADDR_SDPIO=0x4A
I2C_ADC7842_ADDR_AVLINK=0x42
I2C_ADC7842_ADDR_CEC=0x40
I2C_ADC7842_ADDR_INFO=0x3E
I2C_ADC7842_ADDR_AFE=0x26
I2C_ADC7842_ADDR_KSV=0x32
I2C_ADC7842_ADDR_EDID=0x36
I2C_ADC7842_ADDR_HDMI=0x34
I2C_ADC7842_ADDR_CP=0x22
I2C_ADC7842_ADDR_VDP=0x24

I2CG="i2cget -f -y 0"
I2CW="i2cset -f -y 0"

config() {
	echo "Configure ADC7842..."
	echo "The value is: $1"
	${I2CW} ${I2C_PCA9546_ADDR} $1 c
	${I2CW} ${I2C_ADC7842_ADDR} 0xFF 0x80
	${I2CW} ${I2C_ADC7842_ADDR} 0xF1 0x90
	${I2CW} ${I2C_ADC7842_ADDR} 0xF2 0x94
	${I2CW} ${I2C_ADC7842_ADDR} 0xF3 0x84
	${I2CW} ${I2C_ADC7842_ADDR} 0xF4 0x80
	${I2CW} ${I2C_ADC7842_ADDR} 0xF5 0x7c
	${I2CW} ${I2C_ADC7842_ADDR} 0xF8 0x4c
	${I2CW} ${I2C_ADC7842_ADDR} 0xF9 0x64
	${I2CW} ${I2C_ADC7842_ADDR} 0xFA 0x6c
	${I2CW} ${I2C_ADC7842_ADDR} 0xFB 0x68
	${I2CW} ${I2C_ADC7842_ADDR} 0xFD 0x44
	${I2CW} ${I2C_ADC7842_ADDR} 0xFE 0x48
	${I2CW} ${I2C_ADC7842_ADDR} 0x00 0x02
	${I2CW} ${I2C_ADC7842_ADDR} 0x01 0x06
	${I2CW} ${I2C_ADC7842_ADDR} 0x02 0xF4
	${I2CW} ${I2C_ADC7842_ADDR} 0x03 0x80
	${I2CW} ${I2C_ADC7842_ADDR} 0x05 0x28
	${I2CW} ${I2C_ADC7842_ADDR} 0x06 0xA6
			
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0xC1 0xFF
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0xC2 0xFF
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0xC3 0xFF
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0xC4 0xFF
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0xC5 0x00
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0xC6 0x00
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0xC0 0xFF
			
	${I2CW} ${I2C_ADC7842_ADDR} 0x0C 0x40
	${I2CW} ${I2C_ADC7842_ADDR} 0x14 0x3F
	${I2CW} ${I2C_ADC7842_ADDR} 0x15 0x80
	${I2CW} ${I2C_ADC7842_ADDR} 0x19 0x88
	${I2CW} ${I2C_ADC7842_ADDR} 0x33 0x40
		
	${I2CW} ${I2C_ADC7842_ADDR_CP} 0xBA 0x01
	${I2CW} ${I2C_ADC7842_ADDR_CP} 0x3E 0x00
	${I2CW} ${I2C_ADC7842_ADDR_CP} 0x6C 0x00
		
	${I2CW} ${I2C_ADC7842_ADDR_AFE} 0x00 0xFF
	${I2CW} ${I2C_ADC7842_ADDR_AFE} 0x01 0xFE
	${I2CW} ${I2C_ADC7842_ADDR_AFE} 0xB5 0x01
			
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0x00 0x32
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0x01 0x18
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0x0D 0x34
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0x1A 0x8A
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0x3D 0x10
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0x44 0x85
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0x46 0x1F
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0x60 0x88
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0x61 0x88
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0x6C 0x18
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0x57 0xB6
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0x58 0x03
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0x67 0x20

	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0x85 0x1F
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0x87 0x70
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0x89 0x04
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0x8A 0x1E
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0x93 0x04
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0x94 0x1E
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0x9D 0x02
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0x99 0xA1
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0x9B 0x09
	${I2CW} ${I2C_ADC7842_ADDR_HDMI} 0xC9 0x01
	${I2CW} ${I2C_PCA9546_ADDR} 0x00 c

}

case $1 in
	start)
		config $2
		;;
	stop)
		;;
	reload|restart)
		 config
		;;
	*)
		echo "Usage: $0 [start|stop|reload|restart]"
		exit 1
		;;
esac

exit $?
