#!/bin/sh

I2C_PCA9546_ADDR=0x70
I2C_ADC7842_ADDR=0x20
I2C_ADC7842_ADDR_SDP=0x48
I2C_ADC7842_ADDR_SDPIO=0x4A
I2C_ADC7842_ADDR_AVLINK=0x42
I2C_ADC7842_ADDR_CEC=0x40
I2C_ADC7842_ADDR_INFO=0x3E
I2C_ADC7842_ADDR_AFE=0x26
I2C_ADC7842_ADDR_KSV=0x32
I2C_ADC7842_ADDR_EDID=0x36
I2C_ADC7842_ADDR_HDMI=0x34
I2C_ADC7842_ADDR_CP=0x22
I2C_ADC7842_ADDR_VDP=0x24

I2CG="i2cget -f -y 0"
I2CW="i2cset -f -y 0"

config() {
	echo "Configure ADC7842..."

	${I2CW} ${I2C_PCA9546_ADDR} $1 c
	${I2CW} ${I2C_ADC7842_ADDR} 0xFF 0x80
	${I2CW} ${I2C_ADC7842_ADDR} 0xF1 0x90
	${I2CW} ${I2C_ADC7842_ADDR} 0xF2 0x94
	${I2CW} ${I2C_ADC7842_ADDR} 0xF3 0x84
	${I2CW} ${I2C_ADC7842_ADDR} 0xF4 0x80
	${I2CW} ${I2C_ADC7842_ADDR} 0xF5 0x7c
	${I2CW} ${I2C_ADC7842_ADDR} 0xF8 0x4c
	${I2CW} ${I2C_ADC7842_ADDR} 0xF9 0x64
	${I2CW} ${I2C_ADC7842_ADDR} 0xFA 0x6c
	${I2CW} ${I2C_ADC7842_ADDR} 0xFB 0x68
	${I2CW} ${I2C_ADC7842_ADDR} 0xFD 0x44
	${I2CW} ${I2C_ADC7842_ADDR} 0xFE 0x48
			
	${I2CW} ${I2C_ADC7842_ADDR} 0x00 0x07
	${I2CW} ${I2C_ADC7842_ADDR} 0x01 0x82
	${I2CW} ${I2C_ADC7842_ADDR} 0x02 0xF8
	${I2CW} ${I2C_ADC7842_ADDR} 0x03 0x80
	${I2CW} ${I2C_ADC7842_ADDR} 0x05 0x28			
	${I2CW} ${I2C_ADC7842_ADDR} 0x0C 0x40
	${I2CW} ${I2C_ADC7842_ADDR} 0x15 0xb0
        ${I2CW} ${I2C_ADC7842_ADDR} 0x16 0xc8
        ${I2CW} ${I2C_ADC7842_ADDR} 0x17 0x98
	${I2CW} ${I2C_ADC7842_ADDR} 0x19 0x80
	${I2CW} ${I2C_ADC7842_ADDR} 0x33 0x40
			
	${I2CW} ${I2C_ADC7842_ADDR_CP} 0x73 0xea
	${I2CW} ${I2C_ADC7842_ADDR_CP} 0x74 0x8a
	${I2CW} ${I2C_ADC7842_ADDR_CP} 0x75 0xa2	  	
	${I2CW} ${I2C_ADC7842_ADDR_CP} 0x76 0xa8
        ${I2CW} ${I2C_ADC7842_ADDR_CP} 0x7c 0xc0
        ${I2CW} ${I2C_ADC7842_ADDR_CP} 0x7e 0x00
        ${I2CW} ${I2C_ADC7842_ADDR_CP} 0x7c 0xc3
        ${I2CW} ${I2C_ADC7842_ADDR_CP} 0x7d 0xff
	${I2CW} ${I2C_ADC7842_ADDR_CP} 0x85 0x0b
			
        ${I2CW} ${I2C_ADC7842_ADDR_CP} 0x8b 0x4f
	${I2CW} ${I2C_ADC7842_ADDR_CP} 0x8c 0xed
	${I2CW} ${I2C_ADC7842_ADDR_CP} 0x8b 0x4f
        ${I2CW} ${I2C_ADC7842_ADDR_CP} 0x8d 0x20
        ${I2CW} ${I2C_ADC7842_ADDR_CP} 0x8f 0x41
        ${I2CW} ${I2C_ADC7842_ADDR_CP} 0x90 0xa8
        ${I2CW} ${I2C_ADC7842_ADDR_CP} 0x91 0x00
        ${I2CW} ${I2C_ADC7842_ADDR_CP} 0xab 0x46
        ${I2CW} ${I2C_ADC7842_ADDR_CP} 0xac 0x50
        ${I2CW} ${I2C_ADC7842_ADDR_CP} 0xa5 0x46
        ${I2CW} ${I2C_ADC7842_ADDR_CP} 0xa6 0x20
        ${I2CW} ${I2C_ADC7842_ADDR_CP} 0xa7 0x2a
        ${I2CW} ${I2C_ADC7842_ADDR_CP} 0xbe 0x02
        ${I2CW} ${I2C_ADC7842_ADDR_CP} 0xbf 0x32
        ${I2CW} ${I2C_ADC7842_ADDR_CP} 0xc3 0x39
                        
	${I2CW} ${I2C_ADC7842_ADDR_AFE} 0x0c 0x1F
	${I2CW} ${I2C_ADC7842_ADDR_AFE} 0x12 0x63
	${I2CW} ${I2C_ADC7842_ADDR_AFE} 0x00 0x80
	${I2CW} ${I2C_ADC7842_ADDR_AFE} 0x02 0x00
	${I2CW} ${I2C_ADC7842_ADDR_AFE} 0xc8 0x35
	${I2CW} ${I2C_ADC7842_ADDR_AFE} 0x05 0x0F
	${I2CW} ${I2C_ADC7842_ADDR_AFE} 0x06 0x20
	${I2CW} ${I2C_ADC7842_ADDR_AFE} 0x07 0xff
	${I2CW} ${I2C_PCA9546_ADDR} 0x00 c
}

case $1 in
	start)
		config $1
		;;
	stop)
		;;
	reload|restart)
		 config
		;;
	*)
		echo "Usage: $0 [start|stop|reload|restart]"
		exit 1
		;;
esac

exit $?

